<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="description" content="PragmaticScala">
<meta name="generator" content="Paradox, paradox-material-theme=0.4.0, mkdocs-material=2.2.2">

<meta name="lang:clipboard.copy" content="Copy to clipboard">
<meta name="lang:clipboard.copied" content="Copied to clipboard">
<meta name="lang:search.result.none" content="No matching documents">
<meta name="lang:search.result.one" content="1 matching document">
<meta name="lang:search.result.other" content="# matching documents">
<meta name="lang:search.language" content="">
<meta name="lang:search.tokenizer" content="[\s\-]+">


<meta name="description" content="PragmaticScala">
<link rel="shortcut icon" href="../assets/images/favicon.png">
<title>第15章——使用Scala创建应用程序 · </title>
<link rel="stylesheet" href="../assets/stylesheets/application.7a4cdee3.css">
<link rel="stylesheet" href="../lib/material__tabs/dist/mdc.tabs.min.css">
<link rel="stylesheet" href="../lib/prettify/prettify.css">
<script src="../lib/modernizr/modernizr.min.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
<style>
body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}
code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}
</style>
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="../assets/stylesheets/paradox-material-theme.css">
</head>
<body
>
<input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
<input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
<label class="md-overlay" data-md-component="overlay" for="drawer"></label>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a href="../index.html" title="" class="md-header-nav__button md-logo">
<i class="md-icon">local_library</i>
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
</span>
<span class="md-header-nav__topic">
第15章——使用Scala创建应用程序
</span>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="search"></label>
<div class="md-search__inner">
<form class="md-search__form" name="search">
<input type="text" class="md-search__input" name="query" required placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
<label class="md-icon md-search__icon" for="search"></label>
<button type="reset" class="md-icon md-search__icon" data-md-component="reset">&#xE5CD;</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix>
<div class="md-search-result" data-md-component="result">
<div class="md-search-result__meta">
Type to start searching
</div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>

</div>
</div>
</nav>
</header>

<div class="md-container">
<main class="md-main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0" style="visibility: hidden">
<label class="md-nav__title md-nav__title--site" for="drawer">
<span class="md-nav__button md-logo">
<i class="md-icon">local_library</i>
</span>
<a href="../index.html" title="">
</a>
</label>
<ul>
  <li><a href="../contents.html" class="page">目录</a>
  <ul>
    <li><a href="../chapter-01/index.html" class="page">第1章——探索Scala</a></li>
    <li><a href="../chapter-02/index.html" class="page">第2章——体验Scala</a></li>
    <li><a href="../chapter-03/index.html" class="page">第3章——From Java to Scala</a></li>
    <li><a href="../chapter-04/index.html" class="page">第4章——善用对象</a></li>
    <li><a href="../chapter-05/index.html" class="page">第5章——善用类型</a></li>
    <li><a href="../chapter-07/index.html" class="page">第7章——特质</a></li>
    <li><a href="../chapter-08/index.html" class="page">第8章——集合</a></li>
    <li><a href="../chapter-09/index.html" class="page">第9章——模式匹配和正则表达式</a></li>
    <li><a href="../chapter-10/index.html" class="page">第10章——处理异常</a></li>
    <li><a href="../chapter-11/index.html" class="page">第11章——递归编程</a></li>
    <li><a href="../chapter-12/index.html" class="page">第12章——惰性求值和并行集合</a></li>
    <li><a href="../chapter-13/index.html" class="page">第13章——使用Actor模型处理并发</a></li>
    <li><a href="../chapter-14/index.html" class="page">第14章——和Java进行互操作</a></li>
    <li><a href="../chapter-15/index.html" class="active page">第15章——使用Scala创建应用程序</a></li>
    <li><a href="../chapter-16/index.html" class="page">第16章——单元测试</a></li>
  </ul></li>
</ul>
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="toc">Table of contents</label>
<ul>
  <li><a href="../chapter-15/index.html#第15章-使用scala创建应用程序" class="header">第15章——使用Scala创建应用程序</a>
  <ul>
    <li><a href="../chapter-15/index.html#代码清单15-1" class="header">代码清单15-1</a></li>
    <li><a href="../chapter-15/index.html#代码清单15-2" class="header">代码清单15-2</a></li>
    <li><a href="../chapter-15/index.html#代码清单15-3" class="header">代码清单15-3</a></li>
    <li><a href="../chapter-15/index.html#代码清单15-4" class="header">代码清单15-4</a></li>
    <li><a href="../chapter-15/index.html#代码清单15-5" class="header">代码清单15-5</a></li>
    <li><a href="../chapter-15/index.html#代码清单15-6" class="header">代码清单15-6</a></li>
    <li><a href="../chapter-15/index.html#代码清单15-7" class="header">代码清单15-7</a></li>
    <li><a href="../chapter-15/index.html#代码清单15-8" class="header">代码清单15-8</a></li>
    <li><a href="../chapter-15/index.html#代码清单15-9" class="header">代码清单15-9</a></li>
    <li><a href="../chapter-15/index.html#代码清单15-10" class="header">代码清单15-10</a></li>
    <li><a href="../chapter-15/index.html#代码清单15-11" class="header">代码清单15-11</a></li>
    <li><a href="../chapter-15/index.html#代码清单15-12" class="header">代码清单15-12</a></li>
    <li><a href="../chapter-15/index.html#代码清单15-13" class="header">代码清单15-13</a></li>
    <li><a href="../chapter-15/index.html#代码清单15-14" class="header">代码清单15-14</a></li>
    <li><a href="../chapter-15/index.html#代码清单15-15" class="header">代码清单15-15</a></li>
    <li><a href="../chapter-15/index.html#代码清单15-16" class="header">代码清单15-16</a></li>
  </ul></li>
</ul>
</nav>

<div class="md-nav__title--site md-version" title="Version">
<i class="md-icon">label_outline</i> 1.0
</div>
</nav>

</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="toc">Table of contents</label>
<ul>
  <li><a href="../chapter-15/index.html#第15章-使用scala创建应用程序" class="header">第15章——使用Scala创建应用程序</a>
  <ul>
    <li><a href="../chapter-15/index.html#代码清单15-1" class="header">代码清单15-1</a></li>
    <li><a href="../chapter-15/index.html#代码清单15-2" class="header">代码清单15-2</a></li>
    <li><a href="../chapter-15/index.html#代码清单15-3" class="header">代码清单15-3</a></li>
    <li><a href="../chapter-15/index.html#代码清单15-4" class="header">代码清单15-4</a></li>
    <li><a href="../chapter-15/index.html#代码清单15-5" class="header">代码清单15-5</a></li>
    <li><a href="../chapter-15/index.html#代码清单15-6" class="header">代码清单15-6</a></li>
    <li><a href="../chapter-15/index.html#代码清单15-7" class="header">代码清单15-7</a></li>
    <li><a href="../chapter-15/index.html#代码清单15-8" class="header">代码清单15-8</a></li>
    <li><a href="../chapter-15/index.html#代码清单15-9" class="header">代码清单15-9</a></li>
    <li><a href="../chapter-15/index.html#代码清单15-10" class="header">代码清单15-10</a></li>
    <li><a href="../chapter-15/index.html#代码清单15-11" class="header">代码清单15-11</a></li>
    <li><a href="../chapter-15/index.html#代码清单15-12" class="header">代码清单15-12</a></li>
    <li><a href="../chapter-15/index.html#代码清单15-13" class="header">代码清单15-13</a></li>
    <li><a href="../chapter-15/index.html#代码清单15-14" class="header">代码清单15-14</a></li>
    <li><a href="../chapter-15/index.html#代码清单15-15" class="header">代码清单15-15</a></li>
    <li><a href="../chapter-15/index.html#代码清单15-16" class="header">代码清单15-16</a></li>
  </ul></li>
</ul>
</nav>

</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<div class="md-content__searchable">
<h1><a href="#第15章-使用scala创建应用程序" name="第15章-使用scala创建应用程序" class="anchor"><span class="anchor-link"></span></a>第15章——使用Scala创建应用程序</h1>
<h2><a href="#代码清单15-1" name="代码清单15-1" class="anchor"><span class="anchor-link"></span></a>代码清单15-1</h2>
<pre class="prettyprint"><code class="language-scala">import scala.io._

print(&quot;Please enter a ticker symbol:&quot;)
val symbol = StdIn.readLine()
println(s&quot;OK, got it, you own $symbol&quot;)</code></pre>
<p><em>运行结果</em></p>
<pre class="prettyprint"><code class="language-output">Please enter a ticker symbol:OK, got it, you own AAPL</code></pre>
<h2><a href="#代码清单15-2" name="代码清单15-2" class="anchor"><span class="anchor-link"></span></a>代码清单15-2</h2>
<pre class="prettyprint"><code class="language-scala">import java.io._

val writer = new PrintWriter(new File(&quot;symbols.txt&quot;))
writer write &quot;AAPL&quot;
writer.close()
println(scala.io.Source.fromFile(&quot;symbols.txt&quot;).mkString)</code></pre>
<h2><a href="#代码清单15-3" name="代码清单15-3" class="anchor"><span class="anchor-link"></span></a>代码清单15-3</h2>
<pre class="prettyprint"><code class="language-scala">import scala.io._

print(&quot;Please enter a ticker symbol:&quot;)
val symbol = StdIn.readLine()
println(s&quot;OK, got it, you own $symbol&quot;)</code></pre>
<p><em>运行结果</em></p>
<pre class="prettyprint"><code class="language-output">*** The content of the file you read is:
import scala.io.Source

println(&quot;*** The content of the file you read is:&quot;)
Source.fromFile(&quot;ReadingFile.scala&quot;).foreach { print }</code></pre>
<h2><a href="#代码清单15-4" name="代码清单15-4" class="anchor"><span class="anchor-link"></span></a>代码清单15-4</h2>
<pre class="prettyprint"><code class="language-scala">import scala.io.Source
import java.net.URL

val source = Source.fromURL(new URL(&quot;http://localhost&quot;))

println(s&quot;What&#39;s Source?: $source&quot;)
println(s&quot;Raw String: ${source.mkString}&quot;)</code></pre>
<p><em>运行结果</em></p>
<pre class="prettyprint"><code class="language-output">What&#39;s Source?: non-empty iterator
Raw String: &lt;html&gt;&lt;body&gt;&lt;h1&gt;It works!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;</code></pre>
<h2><a href="#代码清单15-5" name="代码清单15-5" class="anchor"><span class="anchor-link"></span></a>代码清单15-5</h2>
<pre class="prettyprint"><code class="language-scala">val xmlFragment =
  &lt;symbols&gt;
    &lt;symbol ticker=&quot;AAPL&quot;&gt;&lt;units&gt;200&lt;/units&gt;&lt;/symbol&gt;
    &lt;symbol ticker=&quot;IBM&quot;&gt;&lt;units&gt;215&lt;/units&gt;&lt;/symbol&gt;
  &lt;/symbols&gt;

println(xmlFragment)
println(xmlFragment.getClass)</code></pre>
<p><em>运行结果</em></p>
<pre class="prettyprint"><code class="language-output">&lt;symbols&gt;
  &lt;symbol ticker=&quot;AAPL&quot;&gt;&lt;units&gt;200&lt;/units&gt;&lt;/symbol&gt;
  &lt;symbol ticker=&quot;IBM&quot;&gt;&lt;units&gt;215&lt;/units&gt;&lt;/symbol&gt;
&lt;/symbols&gt;
class scala.xml.Elem</code></pre>
<h2><a href="#代码清单15-6" name="代码清单15-6" class="anchor"><span class="anchor-link"></span></a>代码清单15-6</h2>
<pre class="prettyprint"><code class="language-scala">var symbolNodes = xmlFragment \ &quot;symbol&quot;
symbolNodes foreach println
println(symbolNodes.getClass)</code></pre>
<p><em>运行结果</em></p>
<pre class="prettyprint"><code class="language-output">&lt;symbol ticker=&quot;AAPL&quot;&gt;&lt;units&gt;200&lt;/units&gt;&lt;/symbol&gt;
&lt;symbol ticker=&quot;IBM&quot;&gt;&lt;units&gt;215&lt;/units&gt;&lt;/symbol&gt;
class scala.xml.NodeSeq$$anon$1</code></pre>
<h2><a href="#代码清单15-7" name="代码清单15-7" class="anchor"><span class="anchor-link"></span></a>代码清单15-7</h2>
<pre class="prettyprint"><code class="language-scala">var unitsNodes = xmlFragment \\ &quot;units&quot;
unitsNodes foreach println
println(unitsNodes.getClass)
println(unitsNodes.head.text)</code></pre>
<p><em>运行结果</em></p>
<pre class="prettyprint"><code class="language-output">&lt;units&gt;200&lt;/units&gt;
&lt;units&gt;215&lt;/units&gt;
class scala.xml.NodeSeq$$anon$1
200</code></pre>
<h2><a href="#代码清单15-8" name="代码清单15-8" class="anchor"><span class="anchor-link"></span></a>代码清单15-8</h2>
<pre class="prettyprint"><code class="language-scala">unitsNodes.head match {
  case &lt;units&gt;{ numberOfUnits @ _* }&lt;/units&gt; ⇒ println(s&quot;Units: $numberOfUnits&quot;)
}</code></pre>
<p><em>运行结果</em></p>
<pre class="prettyprint"><code class="language-output">Units: 200</code></pre>
<h2><a href="#代码清单15-9" name="代码清单15-9" class="anchor"><span class="anchor-link"></span></a>代码清单15-9</h2>
<pre class="prettyprint"><code class="language-scala">println(&quot;Ticker\tUnits&quot;)
xmlFragment match {
  case &lt;symbols&gt;{ symbolNodes @ _* }&lt;/symbols&gt; ⇒
    for (symbolNode @ &lt;symbol&gt;{ _* }&lt;/symbol&gt; ← symbolNodes) {
      println(&quot;%-7s %s&quot;.format(
        symbolNode \ &quot;@ticker&quot;, (symbolNode \ &quot;units&quot;).text))
    }
}</code></pre>
<p><em>运行结果</em></p>
<pre class="prettyprint"><code class="language-output">Ticker	Units
AAPL    200
IBM     215</code></pre>
<h2><a href="#代码清单15-10" name="代码清单15-10" class="anchor"><span class="anchor-link"></span></a>代码清单15-10</h2>
<pre class="prettyprint"><code class="language-input">&lt;symbols&gt;
  &lt;symbol ticker=&quot;AAPL&quot;&gt;&lt;units&gt;200&lt;/units&gt;&lt;/symbol&gt;
  &lt;symbol ticker=&quot;ADBE&quot;&gt;&lt;units&gt;125&lt;/units&gt;&lt;/symbol&gt;
  &lt;symbol ticker=&quot;ALU&quot;&gt;&lt;units&gt;150&lt;/units&gt;&lt;/symbol&gt;
  &lt;symbol ticker=&quot;AMD&quot;&gt;&lt;units&gt;150&lt;/units&gt;&lt;/symbol&gt;
  &lt;symbol ticker=&quot;CSCO&quot;&gt;&lt;units&gt;250&lt;/units&gt;&lt;/symbol&gt;
  &lt;symbol ticker=&quot;HPQ&quot;&gt;&lt;units&gt;225&lt;/units&gt;&lt;/symbol&gt;
  &lt;symbol ticker=&quot;IBM&quot;&gt;&lt;units&gt;215&lt;/units&gt;&lt;/symbol&gt;
  &lt;symbol ticker=&quot;INTC&quot;&gt;&lt;units&gt;160&lt;/units&gt;&lt;/symbol&gt;
  &lt;symbol ticker=&quot;MSFT&quot;&gt;&lt;units&gt;190&lt;/units&gt;&lt;/symbol&gt;
  &lt;symbol ticker=&quot;NSM&quot;&gt;&lt;units&gt;200&lt;/units&gt;&lt;/symbol&gt;
  &lt;symbol ticker=&quot;ORCL&quot;&gt;&lt;units&gt;200&lt;/units&gt;&lt;/symbol&gt;
  &lt;symbol ticker=&quot;SYMC&quot;&gt;&lt;units&gt;230&lt;/units&gt;&lt;/symbol&gt;
  &lt;symbol ticker=&quot;TXN&quot;&gt;&lt;units&gt;190&lt;/units&gt;&lt;/symbol&gt;
  &lt;symbol ticker=&quot;VRSN&quot;&gt;&lt;units&gt;200&lt;/units&gt;&lt;/symbol&gt;
  &lt;symbol ticker=&quot;XRX&quot;&gt;&lt;units&gt;240&lt;/units&gt;&lt;/symbol&gt;
&lt;/symbols&gt; </code></pre>
<h2><a href="#代码清单15-11" name="代码清单15-11" class="anchor"><span class="anchor-link"></span></a>代码清单15-11</h2>
<pre class="prettyprint"><code class="language-scala">import scala.xml._

val stocksAndUnits = XML load &quot;stocks.xml&quot;
println(stocksAndUnits.getClass)
println(s&quot;File has ${(stocksAndUnits \\ &quot;symbol&quot;).size} symbol elements&quot;)</code></pre>
<p><em>运行结果</em></p>
<pre class="prettyprint"><code class="language-output">class scala.xml.Elem
File has 15 symbol elements</code></pre>
<h2><a href="#代码清单15-12" name="代码清单15-12" class="anchor"><span class="anchor-link"></span></a>代码清单15-12</h2>
<pre class="prettyprint"><code class="language-scala">val stocksAndUnitsMap =
  (Map[String, Int]() /: (stocksAndUnits \ &quot;symbol&quot;)) { (map, symbolNode) ⇒
    val ticker = (symbolNode \ &quot;@ticker&quot;).toString
    val units = (symbolNode \ &quot;units&quot;).text.toInt
    map + (ticker -&gt; units) //return new map, with one additional entry
  }

println(s&quot;Number of symbol elements found is ${stocksAndUnitsMap.size}&quot;)</code></pre>
<p><em>运行结果</em></p>
<pre class="prettyprint"><code class="language-output">Number of symbol elements found is 15</code></pre>
<h2><a href="#代码清单15-13" name="代码清单15-13" class="anchor"><span class="anchor-link"></span></a>代码清单15-13</h2>
<pre class="prettyprint"><code class="language-scala">val updatedStocksAndUnitsXML =
  &lt;symbols&gt;
    { stocksAndUnitsMap map updateUnitsAndCreateXML }
  &lt;/symbols&gt;

def updateUnitsAndCreateXML(element: (String, Int)) = {
  val (ticker, units) = element
  &lt;symbol ticker={ ticker }&gt;
    &lt;units&gt;{ units + 1 }&lt;/units&gt;
  &lt;/symbol&gt;
}

XML save (&quot;stocks2.xml&quot;, updatedStocksAndUnitsXML)

val elementsCount = (XML.load(&quot;stocks2.xml&quot;) \\ &quot;symbol&quot;).size
println(s&quot;Saved file has $elementsCount symbol elements&quot;)</code></pre>
<p><em>运行结果</em></p>
<pre class="prettyprint"><code class="language-output">Saved file has 15 symbol elements</code></pre>
<p><em>运行结果</em></p>
<pre class="prettyprint"><code class="language-out">Date,Open,High,Low,Close,Volume,Adj Close
2015-03-20,561.65,561.72,559.05,560.36,2585800,560.36
2015-03-19,559.39,560.80,556.15,557.99,1191100,557.99
2015-03-18,552.50,559.78,547.00,559.50,2124400,559.50
...</code></pre>
<h2><a href="#代码清单15-14" name="代码清单15-14" class="anchor"><span class="anchor-link"></span></a>代码清单15-14</h2>
<pre class="prettyprint"><code class="language-scala">import java.util.Calendar

object StockPriceFinder {
  def getLatestClosingPrice(symbol: String): Double = {
    val url = &quot;http://ichart.finance.yahoo.com/table.csv?s=&quot; +
      symbol + &quot;&amp;a=00&amp;b=01&amp;c=&quot; + Calendar.getInstance().get(Calendar.YEAR)
    val data = scala.io.Source.fromURL(url).mkString
    val mostRecentData = data.split(&quot;\n&quot;)(1)
    val closingPrice = mostRecentData.split(&quot;,&quot;)(4).toDouble
    closingPrice
  }
  def getTickersAndUnits: Map[String, Int] = {
    val stocksAndUnitsXML = scala.xml.XML.load(&quot;stocks.xml&quot;)
    (Map[String, Int]() /: (stocksAndUnitsXML \ &quot;symbol&quot;)) {
      (map, symbolNode) ⇒
        val ticker = (symbolNode \ &quot;@ticker&quot;).toString
        val units = (symbolNode \ &quot;units&quot;).text.toInt
        map + (ticker -&gt; units)
    }
  }
}</code></pre>
<h2><a href="#代码清单15-15" name="代码清单15-15" class="anchor"><span class="anchor-link"></span></a>代码清单15-15</h2>
<pre class="prettyprint"><code class="language-scala">object FindTotalWorthSequential extends App {
  val symbolsAndUnits = StockPriceFinder.getTickersAndUnits

  println(&quot;Ticker  Units  Closing Price($) Total Value($)&quot;)

  val startTime = System.nanoTime()
  val valuesAndWorth = symbolsAndUnits.keys.map { symbol ⇒
    val units = symbolsAndUnits(symbol)
    val latestClosingPrice = StockPriceFinder getLatestClosingPrice symbol
    val value = units * latestClosingPrice

    (symbol, units, latestClosingPrice, value)
  }

  val netWorth = (0.0 /: valuesAndWorth) { (worth, valueAndWorth) ⇒
    val (_, _, _, value) = valueAndWorth
    worth + value
  }
  val endTime = System.nanoTime()

  valuesAndWorth.toList.sortBy { _._1 }.foreach { valueAndWorth ⇒
    val (symbol, units, latestClosingPrice, value) = valueAndWorth
    println(f&quot;$symbol%7s  $units%5d  $latestClosingPrice%15.2f  $value%.2f&quot;)
  }

  println(f&quot;The total value of your investments is $$$netWorth%.2f&quot;)
  println(f&quot;Took ${(endTime - startTime) / 1000000000.0}%.2f  seconds&quot;)
}</code></pre>
<p><em>运行结果</em></p>
<pre class="prettyprint"><code class="language-output">Ticker  Units  Closing Price($) Total Value($)
   AAPL    200           125.90  25180.00
   ADBE    125            77.36  9670.00
    ALU    150             3.84  576.00
    AMD    150             2.80  420.00
   CSCO    250            28.44  7110.00
    HPQ    225            33.28  7488.00
    IBM    215           162.88  35019.20
   INTC    160            31.31  5009.60
   MSFT    190            42.88  8147.20
    NSM    200            29.94  5988.00
   ORCL    200            44.41  8882.00
   SYMC    230            24.38  5607.40
    TXN    190            59.28  11263.20
   VRSN    200            64.75  12950.00
    XRX    240            13.18  3163.20
The total value of your investments is $146473.80
Took 11.13  seconds</code></pre>
<h2><a href="#代码清单15-16" name="代码清单15-16" class="anchor"><span class="anchor-link"></span></a>代码清单15-16</h2>
<pre class="prettyprint"><code class="language-scala">val valuesAndWorth = symbolsAndUnits.keys.par.map { symbol ⇒</code></pre>
<p><em>运行结果</em></p>
<pre class="prettyprint"><code class="language-output">Ticker  Units  Closing Price($) Total Value($)
   AAPL    200           125.90  25180.00
   ADBE    125            77.36  9670.00
    ALU    150             3.84  576.00
    AMD    150             2.80  420.00
   CSCO    250            28.44  7110.00
    HPQ    225            33.28  7488.00
    IBM    215           162.88  35019.20
   INTC    160            31.31  5009.60
   MSFT    190            42.88  8147.20
    NSM    200            29.94  5988.00
   ORCL    200            44.41  8882.00
   SYMC    230            24.38  5607.40
    TXN    190            59.28  11263.20
   VRSN    200            64.75  12950.00
    XRX    240            13.18  3163.20
The total value of your investments is $146473.80
Took 1.98  seconds</code></pre>
</div>
<div>
<a href="https://github.com/ReactivePlatform/Pragmatic-Scala/tree/master/src/paradox/chapter-15/index.md" title="Edit this page" class="md-source-file md-edit">
Edit this page
</a>
</div>
<div class="print-only">
<span class="md-source-file md-version">
1.0
</span>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a href="../chapter-14/index.html" title="第14章——和Java进行互操作" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Previous
</span>
第14章——和Java进行互操作
</span>
</div>
</a>
<a href="../chapter-16/index.html" title="第16章——单元测试" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Next
</span>
第16章——单元测试
</span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
Powered by
<a href="https://github.com/lightbend/paradox">Paradox</a>
and
<a href="https://jonas.github.io/paradox-material-theme/">Paradox Material Theme</a>

</div>
</div>
</div>
</footer>

</div>
<script src="../assets/javascripts/application.5165553b.js"></script>
<script src="../assets/javascripts/paradox-material-theme.js"></script>
<script>app.initialize({version:"0.17",url:{base:"../."}})</script>
<script type="text/javascript" src="../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {
window.prettyPrint && prettyPrint();
});
</script>
</body>
</html>
